<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureHealth Documentation - Developer Guide</title>
    <meta name="description" content="Comprehensive developer documentation for SecureHealth HIPAA-compliant medical records system with MongoDB Queryable Encryption and Symfony Security Voters.">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Shared navbar styles -->
    <link href="/assets/css/navbar.css" rel="stylesheet">
    
    <!-- Role-aware navbar script -->
    <script src="/assets/js/navbar.js"></script>
    
    <!-- Custom CSS -->
    <style>
        :root {
            --primary-color: #2c5aa0;
            --secondary-color: #1e3a5f;
            --accent-color: #4a90e2;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --light-bg: #f8f9fa;
            --dark-text: #2c3e50;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark-text);
            padding-top: 80px; /* Account for fixed navbar */
        }
        
        /* Navbar styles moved to shared navbar.css */
        
        .hero-section {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 80px 0;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.3;
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin: 1rem 0;
        }
        
        .code-block .comment {
            color: #68d391;
        }
        
        .code-block .keyword {
            color: #f687b3;
        }
        
        .code-block .string {
            color: #fbb6ce;
        }
        
        .code-block .class {
            color: #90cdf4;
        }
        
        .section-card {
            background: white;
            border-radius: 15px;
            padding: 2.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            border-left: 5px solid var(--accent-color);
        }
        
        .encryption-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            margin: 0 2px;
        }
        
        .encryption-deterministic {
            background: #e3f2fd;
            color: #1976d2;
        }
        
        .encryption-range {
            background: #f3e5f5;
            color: #7b1fa2;
        }
        
        .encryption-standard {
            background: #ffebee;
            color: #c62828;
        }
        
        .feature-icon {
            font-size: 2.5rem;
            color: var(--accent-color);
            margin-bottom: 1rem;
        }
        
        .api-endpoint {
            background: var(--light-bg);
            border-radius: 8px;
            padding: 1rem;
            margin: 0.5rem 0;
            border-left: 4px solid var(--success-color);
        }
        
        .api-endpoint .method {
            font-weight: bold;
            color: var(--success-color);
        }
        
        .footer {
            background: var(--secondary-color);
            color: white;
            padding: 60px 0 30px;
            margin-top: 4rem;
        }
        
        .toc {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .toc ul {
            margin: 0;
            padding-left: 1.5rem;
        }
        
        .toc a {
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- Role-aware navbar will be inserted here -->
    <div id="navbar-container"></div>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8 hero-content">
                    <h1 class="display-4 fw-bold mb-4">
                        Developer Documentation
                    </h1>
                    <p class="lead mb-4">
                        Comprehensive guide to implementing MongoDB 8.2 Queryable Encryption with Symfony Security Voters 
                        for HIPAA-compliant medical records management. Production-ready healthcare application with 
                        field-level encryption, role-based access control, and comprehensive audit logging.
                    </p>
                    <div class="d-flex flex-wrap gap-3">
                        <a href="#symfony-encryption" class="btn btn-primary-custom btn-custom">
                            <i class="fas fa-database me-2"></i>MongoDB 8.2 Queryable Encryption
                        </a>
                        <a href="#security-voters" class="btn btn-outline-custom btn-custom">
                            <img src="/images/securehealth-logo.png" alt="SecureHealth Logo" height="60" class="me-2">HIPAA-Compliant Security
                        </a>
                        <a href="#command-line-tool" class="btn btn-outline-custom btn-custom">
                            <i class="fas fa-terminal me-2"></i>Command-Line Management Tool
                        </a>
                    </div>
                </div>
                <div class="col-lg-4 text-center">
                    <div class="feature-icon">
                        <i class="fas fa-book-open"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="container">
        <!-- Table of Contents -->
        <div class="toc">
            <h4><i class="fas fa-list me-2"></i>Table of Contents</h4>
            <ul>
                <li><a href="#overview">Project Overview</a></li>
                <li><a href="#symfony-encryption">MongoDB 8.2 Queryable Encryption</a></li>
                <li><a href="#security-voters">HIPAA-Compliant Security & RBAC</a></li>
                <li><a href="#api-reference">HIPAA-Compliant API Reference</a></li>
                <li><a href="#command-line-tool">Command-Line Management Tool</a></li>
                <li><a href="#development-guide">Development Guide</a></li>
            </ul>
        </div>

        <!-- Project Overview -->
        <div class="section-card" id="overview">
            <h2><i class="fas fa-info-circle me-2"></i>Project Overview</h2>
            <p>SecureHealth is a production-ready, HIPAA-compliant medical records management system that demonstrates advanced data protection using MongoDB 8.2 Queryable Encryption with PHP/Symfony. This project serves as both a functional healthcare application and a comprehensive educational resource for developers learning secure data handling practices in healthcare environments.</p>
            
            <div class="alert alert-info">
                <i class="fas fa-github me-2"></i>
                <strong>Open Source Project:</strong> View the complete source code, documentation, and contribute at 
                <a href="https://github.com/mrlynn/securehealth" target="_blank" class="alert-link">github.com/mrlynn/securehealth</a>
            </div>
            
            <h3>Primary Objectives</h3>
            <ul>
                <li>Build a production-ready medical records API with field-level encryption</li>
                <li>Demonstrate MongoDB 8.2 Queryable Encryption capabilities in real-world healthcare scenarios</li>
                <li>Create reusable patterns for HIPAA-compliant PHP applications</li>
                <li>Establish best practices for encrypted data operations and compliance</li>
                <li>Provide comprehensive audit logging and access control mechanisms</li>
                <li>Showcase role-based access control (RBAC) with Symfony Security Voters</li>
            </ul>

            <h3>Technology Stack</h3>
            <div class="code-block">
<span class="comment">Backend Framework:</span> Symfony 7.0<br>
<span class="comment">Language:</span> PHP 8.2+<br>
<span class="comment">Database:</span> MongoDB 8.2 Enterprise (with Queryable Encryption)<br>
<span class="comment">ODM:</span> Doctrine MongoDB ODM Bundle 5.0+<br>
<span class="comment">Authentication:</span> JWT with Symfony Security<br>
<span class="comment">Encryption:</span> MongoDB Client-Side Field Level Encryption<br>
<span class="comment">Development:</span> Docker + Docker Compose<br>
<span class="comment">Testing:</span> PHPUnit + MongoDB Test Framework<br>
<span class="comment">Security:</span> Symfony Security Voters + RBAC<br>
<span class="comment">Audit:</span> Comprehensive HIPAA-compliant logging
            </div>
            
            <h3>Key Features</h3>
            <div class="row">
                <div class="col-md-6">
                    <h5><img src="/images/securehealth-logo.png" alt="SecureHealth Logo" height="60" class="me-2">HIPAA Compliance</h5>
                    <ul>
                        <li>Field-level encryption for all PHI</li>
                        <li>Comprehensive audit logging</li>
                        <li>Role-based access control</li>
                        <li>Data integrity protection</li>
                        <li>Transmission security</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h5><i class="fas fa-database me-2 text-success"></i>MongoDB Queryable Encryption</h5>
                    <ul>
                        <li>Deterministic encryption for searchable fields</li>
                        <li>Range encryption for date/numeric queries</li>
                        <li>Standard encryption for maximum security</li>
                        <li>Client-side encryption with key management</li>
                        <li>Search on encrypted data without decryption</li>
                    </ul>
                </div>
            </div>
            
            <div class="mt-4">
                <a href="/queryable-encryption-search.html" class="btn btn-primary me-3">
                    <i class="fas fa-search me-2"></i>Try the Queryable Encryption Demo
                </a>
                <a href="https://github.com/mrlynn/securehealth" target="_blank" class="btn btn-outline-primary">
                    <i class="fab fa-github me-2"></i>View on GitHub
                </a>
            </div>
        </div>

        <!-- Symfony MongoDB Queryable Encryption -->
        <div class="section-card" id="symfony-encryption">
            <h2><i class="fas fa-database me-2"></i>MongoDB 8.2 Queryable Encryption Implementation</h2>
            
            <p>This section details how SecureHealth implements MongoDB 8.2 Queryable Encryption within the Symfony framework, providing developers with a complete understanding of the encryption architecture and implementation patterns for HIPAA-compliant healthcare applications.</p>

            <div class="alert alert-success">
                <i class="fas fa-info-circle me-2"></i>
                <strong>MongoDB 8.2 Features:</strong> This implementation leverages the latest MongoDB 8.2 Queryable Encryption capabilities including enhanced performance, improved key management, and expanded search functionality.
            </div>

            <h3>Encryption Service Architecture</h3>
            <p>The core of our encryption implementation is the <code>MongoDBEncryptionService</code> class, which manages all encryption operations and integrates seamlessly with Symfony's dependency injection system. This service provides a comprehensive solution for field-level encryption with different algorithms based on data sensitivity and query requirements.</p>

            <div class="code-block">
<span class="keyword">class</span> <span class="class">MongoDBEncryptionService</span><br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// MongoDB 8.2 Queryable Encryption algorithms</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">const</span> <span class="string">ALGORITHM_DETERMINISTIC</span> = <span class="string">'AEAD_AES_256_CBC_HMAC_SHA_512-Deterministic'</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">const</span> <span class="string">ALGORITHM_RANDOM</span> = <span class="string">'AEAD_AES_256_CBC_HMAC_SHA_512-Random'</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">const</span> <span class="string">ALGORITHM_RANGE</span> = <span class="string">'range'</span>; <span class="comment">// MongoDB 8.2 range encryption</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">const</span> <span class="string">ALGORITHM_EQUALITY</span> = <span class="string">'AEAD_AES_256_CBC_HMAC_SHA_512-Deterministic'</span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public function</span> <span class="class">__construct</span>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class">ParameterBagInterface</span> <span class="string">$params</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class">LoggerInterface</span> <span class="string">$logger</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Initialize MongoDB 8.2 client with Queryable Encryption</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$this</span>-><span class="string">client</span> = <span class="keyword">new</span> <span class="class">Client</span>(<span class="string">$mongoUrl</span>, <span class="keyword">$this</span>-><span class="class">getEncryptionOptions</span>());<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$this</span>-><span class="string">clientEncryption</span> = <span class="keyword">$this</span>-><span class="class">createClientEncryption</span>();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$this</span>-><span class="class">configureEncryptedFieldsDefinitions</span>();<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
}
            </div>

            <h3>Field-Level Encryption Configuration</h3>
            <p>SecureHealth implements a sophisticated field-level encryption strategy that balances security with functionality. Each field is encrypted using the most appropriate algorithm based on its sensitivity and query requirements:</p>

            <div class="row">
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">
                                <span class="encryption-badge encryption-deterministic">Deterministic</span>
                                Searchable Fields
                            </h5>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-user me-2"></i>lastName</li>
                                <li><i class="fas fa-user me-2"></i>firstName</li>
                                <li><i class="fas fa-envelope me-2"></i>email</li>
                                <li><i class="fas fa-phone me-2"></i>phoneNumber</li>
                                <li><i class="fas fa-calendar me-2"></i>birthDate</li>
                            </ul>
                            <small class="text-muted">Enables exact match searches on encrypted data</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">
                                <span class="encryption-badge encryption-range">Range</span>
                                Numeric/Date Fields
                            </h5>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-calendar-alt me-2"></i>birthDate (range queries)</li>
                                <li><i class="fas fa-sort-numeric-up me-2"></i>age ranges</li>
                                <li><i class="fas fa-chart-line me-2"></i>numeric comparisons</li>
                            </ul>
                            <small class="text-muted">Enables range queries on encrypted data</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">
                                <span class="encryption-badge encryption-standard">Standard</span>
                                Highly Sensitive
                            </h5>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-id-card me-2"></i>ssn</li>
                                <li><i class="fas fa-stethoscope me-2"></i>diagnosis</li>
                                <li><i class="fas fa-pills me-2"></i>medications</li>
                                <li><img src="/images/securehealth-logo.png" alt="SecureHealth Logo" height="60" class="me-2">insuranceDetails</li>
                                <li><i class="fas fa-sticky-note me-2"></i>notes</li>
                            </ul>
                            <small class="text-muted">Maximum security, no query capability</small>
                        </div>
                    </div>
                </div>
            </div>

            <h3>Key Management & Security</h3>
            <p>SecureHealth implements a robust key management system that ensures encryption keys are never exposed to unauthorized parties:</p>

            <div class="code-block">
<span class="comment">// Master key management for MongoDB 8.2</span><br>
<span class="keyword">private function</span> <span class="class">getEncryptionOptions</span>(): <span class="keyword">array</span><br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span> [<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'keyVaultNamespace'</span> => <span class="keyword">$this</span>-><span class="string">keyVaultNamespace</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'kmsProviders'</span> => [<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'local'</span> => [<span class="string">'key'</span> => <span class="keyword">new</span> <span class="class">Binary</span>(<span class="keyword">$this</span>-><span class="string">masterKey</span>, <span class="class">Binary</span>::<span class="string">TYPE_GENERIC</span>)]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'bypassAutoEncryption'</span> => <span class="keyword">false</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'cryptSharedLibRequired'</span> => <span class="keyword">true</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// MongoDB 8.2 performance optimizations</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'cacheSize'</span> => <span class="string">1000</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'maxWireVersion'</span> => <span class="string">17</span>, <span class="comment">// MongoDB 8.2</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'useClientMemoryCursor'</span> => <span class="keyword">true</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;];<br>
}
            </div>

            <h3>Search Capabilities</h3>
            <p>MongoDB 8.2 Queryable Encryption enables powerful search capabilities on encrypted data without compromising security:</p>

            <div class="row">
                <div class="col-md-6">
                    <h5><i class="fas fa-search me-2 text-primary"></i>Equality Search</h5>
                    <p>Find patients by exact matches on encrypted fields:</p>
                    <div class="code-block">
<span class="comment">// Search for patient by encrypted last name</span><br>
<span class="keyword">$encryptedLastName</span> = <span class="keyword">$this</span>-><span class="class">encrypt</span>(<span class="string">'patient'</span>, <span class="string">'lastName'</span>, <span class="string">'Smith'</span>);<br>
<span class="keyword">$patients</span> = <span class="keyword">$this</span>-><span class="string">collection</span>-><span class="class">find</span>([<span class="string">'lastName'</span> => <span class="keyword">$encryptedLastName</span>]);
                    </div>
                </div>
                <div class="col-md-6">
                    <h5><i class="fas fa-sort-numeric-up me-2 text-success"></i>Range Search</h5>
                    <p>Query patients by age ranges or date ranges:</p>
                    <div class="code-block">
<span class="comment">// Find patients born between 1980-1990</span><br>
<span class="keyword">$criteria</span> = [<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'birthDate'</span> => [<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'$gte'</span> => <span class="keyword">$this</span>-><span class="class">encrypt</span>(<span class="string">'patient'</span>, <span class="string">'birthDate'</span>, <span class="string">'1980-01-01'</span>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'$lte'</span> => <span class="keyword">$this</span>-><span class="class">encrypt</span>(<span class="string">'patient'</span>, <span class="string">'birthDate'</span>, <span class="string">'1990-12-31'</span>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;]<br>
];
                    </div>
                </div>
            </div>

            <div class="mt-4">
                <a href="/queryable-encryption-search.html" class="btn btn-primary me-3">
                    <i class="fas fa-search me-2"></i>Try Encrypted Search Demo
                </a>
                <a href="https://github.com/mrlynn/securehealth/blob/main/src/Service/MongoDBEncryptionService.php" target="_blank" class="btn btn-outline-primary">
                    <i class="fab fa-github me-2"></i>View Source Code
                </a>
            </div>
        </div>

        <!-- Symfony Security Voters & RBAC -->
        <div class="section-card" id="security-voters">
            <h2><img src="/images/securehealth-logo.png" alt="SecureHealth Logo" height="60" class="me-2">HIPAA-Compliant Security & Role-Based Access Control</h2>
            
            <p>SecureHealth implements a comprehensive HIPAA-compliant security system using Symfony Security Voters, ensuring that users can only access data appropriate to their role and responsibilities. This implementation provides the technical safeguards required by HIPAA §164.312.</p>

            <div class="alert alert-warning">
                <i class="fas fa-exclamation-triangle me-2"></i>
                <strong>HIPAA Compliance:</strong> This security implementation addresses all HIPAA technical safeguards including access controls, audit controls, integrity, and transmission security.
            </div>

            <h3>Security Voter Implementation</h3>
            <p>The <code>PatientVoter</code> class demonstrates how to implement fine-grained permissions using Symfony's voter system with comprehensive audit logging:</p>

            <div class="code-block">
<span class="keyword">class</span> <span class="class">PatientVoter</span> <span class="keyword">extends</span> <span class="class">Voter</span><br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// HIPAA-compliant permission constants</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public const</span> <span class="string">VIEW</span> = <span class="string">'PATIENT_VIEW'</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public const</span> <span class="string">CREATE</span> = <span class="string">'PATIENT_CREATE'</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public const</span> <span class="string">EDIT</span> = <span class="string">'PATIENT_EDIT'</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public const</span> <span class="string">DELETE</span> = <span class="string">'PATIENT_DELETE'</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public const</span> <span class="string">VIEW_DIAGNOSIS</span> = <span class="string">'PATIENT_VIEW_DIAGNOSIS'</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public const</span> <span class="string">VIEW_SSN</span> = <span class="string">'PATIENT_VIEW_SSN'</span>;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">protected function</span> <span class="class">voteOnAttribute</span>(<span class="keyword">string</span> <span class="string">$attribute</span>, <span class="keyword">mixed</span> <span class="string">$subject</span>, <span class="class">TokenInterface</span> <span class="string">$token</span>): <span class="keyword">bool</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$user</span> = <span class="keyword">$token</span>-><span class="class">getUser</span>();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$roles</span> = <span class="keyword">$user</span>-><span class="class">getRoles</span>();<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// HIPAA-compliant audit logging</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$this</span>-><span class="string">auditLogService</span>-><span class="class">log</span>(<span class="keyword">$user</span>, <span class="string">'security_access'</span>, [<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'attribute'</span> => <span class="keyword">$attribute</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'patientId'</span> => <span class="keyword">$subject</span>-><span class="class">getId</span>(),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'granted'</span> => <span class="keyword">null</span> <span class="comment">// Will update after permission check</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Check permission based on role and attribute</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$granted</span> = <span class="keyword">$this</span>-><span class="class">checkPermission</span>(<span class="keyword">$attribute</span>, <span class="keyword">$roles</span>, <span class="keyword">$subject</span>, <span class="keyword">$user</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Update audit log with result</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$this</span>-><span class="string">auditLogService</span>-><span class="class">updateLastLog</span>([<span class="string">'granted'</span> => <span class="keyword">$granted</span>]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span> <span class="keyword">$granted</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
}
            </div>

            <h3>HIPAA-Compliant Role Hierarchy</h3>
            <p>Our security configuration implements the principle of least privilege required by HIPAA, ensuring users only access the minimum necessary information:</p>

            <div class="row">
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title"><i class="fas fa-user-md me-2 text-primary"></i>Doctor (ROLE_DOCTOR)</h5>
                            <div class="mb-3">
                                <span class="badge bg-primary">Full Access</span>
                            </div>
                            <ul>
                                <li>Full patient access</li>
                                <li>View/edit all medical data</li>
                                <li>Access SSN information</li>
                                <li>Create/update/delete patients</li>
                                <li>View encrypted diagnosis & medications</li>
                            </ul>
                            <small class="text-muted">HIPAA: Full PHI access for medical treatment</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title"><i class="fas fa-user-nurse me-2 text-info"></i>Nurse (ROLE_NURSE)</h5>
                            <div class="mb-3">
                                <span class="badge bg-info">Limited Access</span>
                            </div>
                            <ul>
                                <li>View patient basic info</li>
                                <li>Access diagnosis & medications</li>
                                <li>Update patient records</li>
                                <li>No SSN access</li>
                                <li>No insurance details</li>
                            </ul>
                            <small class="text-muted">HIPAA: Medical data access for patient care</small>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title"><i class="fas fa-user-tie me-2 text-secondary"></i>Receptionist (ROLE_RECEPTIONIST)</h5>
                            <div class="mb-3">
                                <span class="badge bg-secondary">Minimal Access</span>
                            </div>
                            <ul>
                                <li>View basic patient info</li>
                                <li>Access insurance details</li>
                                <li>Create new patients</li>
                                <li>No medical data access</li>
                                <li>No SSN access</li>
                            </ul>
                            <small class="text-muted">HIPAA: Administrative data only</small>
                        </div>
                    </div>
                </div>
            </div>

            <h3>Comprehensive Audit Logging</h3>
            <p>SecureHealth implements comprehensive audit logging that meets HIPAA §164.312(b) requirements for audit controls:</p>

            <div class="row">
                <div class="col-md-6">
                    <h5><i class="fas fa-clipboard-list me-2 text-primary"></i>Security Events</h5>
                    <ul>
                        <li>User login (successful and failed)</li>
                        <li>User logout</li>
                        <li>Permission changes</li>
                        <li>Access attempts</li>
                        <li>Authentication failures</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h5><i class="fas fa-user-injured me-2 text-success"></i>Patient Data Events</h5>
                    <ul>
                        <li>Patient record creation</li>
                        <li>Patient record viewing</li>
                        <li>Patient record updates</li>
                        <li>Patient record deletion</li>
                        <li>Patient search operations</li>
                    </ul>
                </div>
            </div>

            <div class="code-block">
<span class="comment">// HIPAA-compliant audit logging example</span><br>
<span class="keyword">class</span> <span class="class">AuditLogSubscriber</span> <span class="keyword">implements</span> <span class="class">EventSubscriberInterface</span><br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public function</span> <span class="class">onKernelRequest</span>(<span class="class">RequestEvent</span> <span class="string">$event</span>): <span class="keyword">void</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Log all API requests for HIPAA compliance</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$this</span>-><span class="string">auditLogService</span>-><span class="class">log</span>(<span class="keyword">$user</span>, <span class="string">'API_REQUEST'</span>, [<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'method'</span> => <span class="keyword">$request</span>-><span class="class">getMethod</span>(),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'path'</span> => <span class="keyword">$request</span>-><span class="class">getPathInfo</span>(),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'ip'</span> => <span class="keyword">$request</span>-><span class="class">getClientIp</span>(),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">'roles'</span> => <span class="keyword">$user</span>-><span class="class">getRoles</span>()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
}
            </div>

            <h3>Controller Integration with HIPAA Compliance</h3>
            <p>Controllers enforce HIPAA-compliant permissions and data filtering:</p>

            <div class="code-block">
<span class="keyword">class</span> <span class="class">PatientController</span> <span class="keyword">extends</span> <span class="class">AbstractController</span><br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public function</span> <span class="class">show</span>(<span class="keyword">string</span> <span class="string">$id</span>): <span class="class">JsonResponse</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$patient</span> = <span class="keyword">$this</span>-><span class="class">getPatientById</span>(<span class="keyword">$id</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// HIPAA-compliant access control</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$this</span>-><span class="class">denyAccessUnlessGranted</span>(<span class="class">PatientVoter</span>::<span class="string">VIEW</span>, <span class="keyword">$patient</span>);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Return data with role-based filtering (HIPAA principle of least privilege)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span> <span class="keyword">$this</span>-><span class="class">json</span>(<span class="keyword">$patient</span>-><span class="class">toArray</span>(<span class="keyword">$this</span>-><span class="class">getUser</span>()));<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
}
            </div>

            <div class="mt-4">
                <a href="https://github.com/mrlynn/securehealth/blob/main/src/Security/Voter/PatientVoter.php" target="_blank" class="btn btn-outline-primary me-3">
                    <i class="fab fa-github me-2"></i>View PatientVoter Source
                </a>
                <a href="https://github.com/mrlynn/securehealth/blob/main/src/EventSubscriber/AuditLogSubscriber.php" target="_blank" class="btn btn-outline-primary">
                    <i class="fab fa-github me-2"></i>View Audit Logging Source
                </a>
            </div>
        </div>

        <!-- API Reference -->
        <div class="section-card" id="api-reference">
            <h2><i class="fas fa-code me-2"></i>HIPAA-Compliant API Reference</h2>
            
            <p>SecureHealth provides a comprehensive REST API with built-in HIPAA compliance features including encrypted data storage, role-based access control, and comprehensive audit logging.</p>

            <div class="alert alert-info">
                <img src="/images/securehealth-logo.png" alt="SecureHealth Logo" height="60" class="me-2">
                <strong>HIPAA Compliance:</strong> All API endpoints implement the technical safeguards required by HIPAA §164.312 including access controls, audit controls, integrity, and transmission security.
            </div>

            <h3>Authentication & Authorization</h3>
            <p>SecureHealth uses JWT-based authentication with role-based access control. All API requests require valid authentication and appropriate permissions:</p>

            <div class="api-endpoint">
                <span class="method">POST</span> /api/login<br>
                <strong>Description:</strong> Authenticate user and receive JWT token<br>
                <strong>Headers:</strong> Content-Type: application/json<br>
                <strong>Body:</strong> {"_username":"doctor@example.com","_password":"doctor"}<br>
                <strong>Response:</strong> JWT token for subsequent API calls
            </div>

            <h3>Available Test Users (HIPAA Roles)</h3>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Role</th>
                        <th>Email</th>
                        <th>Password</th>
                        <th>HIPAA Permissions</th>
                        <th>Data Access Level</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="badge bg-primary">Doctor</span></td>
                        <td>doctor@example.com</td>
                        <td>doctor</td>
                        <td>Full PHI access for medical treatment</td>
                        <td>All encrypted patient data including SSN</td>
                    </tr>
                    <tr>
                        <td><span class="badge bg-info">Nurse</span></td>
                        <td>nurse@example.com</td>
                        <td>nurse</td>
                        <td>Medical data access for patient care</td>
                        <td>Medical data (no SSN, no insurance)</td>
                    </tr>
                    <tr>
                        <td><span class="badge bg-secondary">Receptionist</span></td>
                        <td>receptionist@example.com</td>
                        <td>receptionist</td>
                        <td>Administrative data only</td>
                        <td>Basic info and insurance details</td>
                    </tr>
                </tbody>
            </table>

            <h3>Patient Management Endpoints (HIPAA-Compliant)</h3>
            <div class="api-endpoint">
                <span class="method">GET</span> /api/patients<br>
                <strong>Description:</strong> List all patients with role-based data filtering<br>
                <strong>Required Role:</strong> Any authenticated healthcare staff<br>
                <strong>HIPAA Compliance:</strong> Data filtered based on user role (least privilege)<br>
                <strong>Query Parameters:</strong> lastName, firstName, page, limit<br>
                <strong>Audit Logging:</strong> All access attempts logged
            </div>

            <div class="api-endpoint">
                <span class="method">GET</span> /api/patients/{id}<br>
                <strong>Description:</strong> Get a specific patient with encrypted data<br>
                <strong>Required Role:</strong> Any authenticated healthcare staff<br>
                <strong>HIPAA Compliance:</strong> Access control via PatientVoter, encrypted data returned<br>
                <strong>Response:</strong> Patient data filtered by user role and encryption status
            </div>

            <div class="api-endpoint">
                <span class="method">POST</span> /api/patients<br>
                <strong>Description:</strong> Create a new patient with encrypted PHI<br>
                <strong>Required Role:</strong> Doctor only<br>
                <strong>HIPAA Compliance:</strong> All PHI encrypted before storage<br>
                <strong>Body:</strong> Patient data (JSON) - sensitive fields automatically encrypted<br>
                <strong>Audit Logging:</strong> Patient creation logged with user details
            </div>

            <div class="api-endpoint">
                <span class="method">PUT</span> /api/patients/{id}<br>
                <strong>Description:</strong> Update a patient with encrypted data<br>
                <strong>Required Role:</strong> Doctor or Nurse<br>
                <strong>HIPAA Compliance:</strong> Field-level encryption, access control, audit logging<br>
                <strong>Body:</strong> Updated patient data (JSON)<br>
                <strong>Audit Logging:</strong> All field changes logged for HIPAA compliance
            </div>

            <div class="api-endpoint">
                <span class="method">DELETE</span> /api/patients/{id}<br>
                <strong>Description:</strong> Delete a patient record<br>
                <strong>Required Role:</strong> Doctor only<br>
                <strong>HIPAA Compliance:</strong> Secure deletion with audit trail<br>
                <strong>Audit Logging:</strong> Deletion logged with user and patient details
            </div>

            <h3>MongoDB 8.2 Queryable Encryption Search Endpoints</h3>
            <p>These endpoints demonstrate MongoDB 8.2 Queryable Encryption capabilities, allowing searches on encrypted data without server-side decryption:</p>

            <div class="api-endpoint">
                <span class="method">POST</span> /api/encrypted-search/equality<br>
                <strong>Description:</strong> Search using exact matches on deterministically encrypted fields<br>
                <strong>Encryption Type:</strong> Deterministic (AEAD_AES_256_CBC_HMAC_SHA_512-Deterministic)<br>
                <strong>Supported Fields:</strong> lastName, firstName, email, phoneNumber<br>
                <strong>Body:</strong> {"lastName": "Smith", "email": "john@example.com"}<br>
                <strong>HIPAA Compliance:</strong> Search performed on encrypted data, results filtered by role
            </div>

            <div class="api-endpoint">
                <span class="method">POST</span> /api/encrypted-search/range<br>
                <strong>Description:</strong> Search using range queries on encrypted date/numeric fields<br>
                <strong>Encryption Type:</strong> Range encryption for MongoDB 8.2<br>
                <strong>Supported Fields:</strong> birthDate, age ranges<br>
                <strong>Body:</strong> {"minAge": 18, "maxAge": 65, "birthDateFrom": "1990-01-01"}<br>
                <strong>HIPAA Compliance:</strong> Range queries on encrypted data with role-based filtering
            </div>

            <div class="api-endpoint">
                <span class="method">POST</span> /api/encrypted-search/complex<br>
                <strong>Description:</strong> Complex multi-field searches combining different encryption types<br>
                <strong>Encryption Types:</strong> Deterministic + Range encryption<br>
                <strong>Supported Fields:</strong> lastName, email, birthDate, phoneNumber<br>
                <strong>Body:</strong> {"lastName": "Smith", "minAge": 30, "birthYear": 1985}<br>
                <strong>HIPAA Compliance:</strong> Multi-field encrypted search with comprehensive audit logging
            </div>

            <div class="api-endpoint">
                <span class="method">GET</span> /api/encrypted-search/capabilities<br>
                <strong>Description:</strong> Get information about available search capabilities<br>
                <strong>Response:</strong> Available search types, supported fields, and encryption methods<br>
                <strong>Use Case:</strong> Frontend integration and capability discovery
            </div>

            <h3>Audit & Compliance Endpoints</h3>
            <div class="api-endpoint">
                <span class="method">GET</span> /api/audit-logs<br>
                <strong>Description:</strong> Retrieve audit logs for HIPAA compliance<br>
                <strong>Required Role:</strong> Admin only<br>
                <strong>Query Parameters:</strong> user, action, dateFrom, dateTo, page, limit<br>
                <strong>HIPAA Compliance:</strong> Comprehensive audit trail for all PHI access
            </div>

            <div class="api-endpoint">
                <span class="method">GET</span> /api/health<br>
                <strong>Description:</strong> System health check including encryption status<br>
                <strong>Response:</strong> System status, encryption service status, MongoDB connection<br>
                <strong>Use Case:</strong> Monitoring and compliance verification
            </div>
            
            <div class="alert alert-success mt-3">
                <i class="fas fa-info-circle me-2"></i>
                <strong>Interactive Demo:</strong> Try our <a href="/queryable-encryption-search.html">Queryable Encryption Search Demo</a> to see these endpoints in action with a user-friendly interface.
            </div>

            <div class="alert alert-warning mt-3">
                <i class="fas fa-github me-2"></i>
                <strong>Source Code:</strong> View the complete API implementation at 
                <a href="https://github.com/mrlynn/securehealth/tree/main/src/Controller/Api" target="_blank" class="alert-link">github.com/mrlynn/securehealth/src/Controller/Api</a>
            </div>
        </div>

        <!-- Command-Line Management Tool -->
        <div class="section-card" id="command-line-tool">
            <h2><i class="fas fa-terminal me-2"></i>Command-Line Management Tool</h2>
            
            <p>SecureHealth includes a comprehensive command-line management tool that provides administrators with powerful capabilities for system management, data operations, and HIPAA compliance monitoring. This tool serves as a central hub for all administrative tasks and system maintenance operations.</p>

            <div class="alert alert-success">
                <i class="fas fa-info-circle me-2"></i>
                <strong>Production Ready:</strong> The SecureHealth command-line tool is fully functional with real implementations for all features, making it suitable for production environments and daily administrative tasks.
            </div>

            <h3>Quick Start</h3>
            <p>Access the command-line tool using the main command with various options:</p>

            <div class="code-block">
<span class="comment"># Show main menu with all available commands</span><br>
<span class="keyword">php bin/console securehealth</span><br>
<br>
<span class="comment"># Run in interactive mode with menu-driven interface</span><br>
<span class="keyword">php bin/console securehealth --interactive</span><br>
<br>
<span class="comment"># Run specific command directly</span><br>
<span class="keyword">php bin/console securehealth -c setup</span><br>
<span class="keyword">php bin/console securehealth -c status</span><br>
<span class="keyword">php bin/console securehealth -c validation</span>
            </div>

            <h3>Available Commands</h3>
            <p>The SecureHealth command-line tool provides comprehensive system management through the following command categories:</p>

            <div class="row">
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">
                                <i class="fas fa-rocket me-2 text-primary"></i>System Setup
                            </h5>
                            <p class="card-text">Complete system initialization and setup operations.</p>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-database me-2"></i>Database schema creation</li>
                                <li><i class="fas fa-users me-2"></i>Default user creation</li>
                                <li><i class="fas fa-user-injured me-2"></i>Sample patient data generation</li>
                                <li><i class="fas fa-brain me-2"></i>Medical knowledge base seeding</li>
                                <li><i class="fas fa-check-circle me-2"></i>System validation</li>
                            </ul>
                            <div class="mt-auto">
                                <span class="badge bg-primary">php bin/console securehealth -c setup</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">
                                <i class="fas fa-users me-2 text-info"></i>User Management
                            </h5>
                            <p class="card-text">Comprehensive user administration and role management.</p>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-list me-2"></i>List all system users</li>
                                <li><i class="fas fa-user-plus me-2"></i>Create new admin users</li>
                                <li><i class="fas fa-user-shield me-2"></i>Role assignment</li>
                                <li><i class="fas fa-key me-2"></i>Password management</li>
                                <li><i class="fas fa-user-check me-2"></i>User validation</li>
                            </ul>
                            <div class="mt-auto">
                                <span class="badge bg-info">php bin/console securehealth -c users</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">
                                <i class="fas fa-user-injured me-2 text-success"></i>Patient Management
                            </h5>
                            <p class="card-text">HIPAA-compliant patient data operations and management.</p>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-plus me-2"></i>Generate sample patient data</li>
                                <li><i class="fas fa-chart-bar me-2"></i>Patient statistics and counts</li>
                                <li><i class="fas fa-download me-2"></i>Export patient data (JSON/CSV/XML)</li>
                                <li><i class="fas fa-upload me-2"></i>Import patient data</li>
                                <li><img src="/images/securehealth-logo.png" alt="SecureHealth Logo" height="60" class="me-2">Encryption status monitoring</li>
                            </ul>
                            <div class="mt-auto">
                                <span class="badge bg-success">php bin/console securehealth -c patients</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">
                                <i class="fas fa-brain me-2 text-warning"></i>Medical Knowledge
                            </h5>
                            <p class="card-text">AI-powered medical knowledge base management.</p>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-seedling me-2"></i>Seed knowledge base</li>
                                <li><i class="fas fa-chart-pie me-2"></i>Knowledge base statistics</li>
                                <li><i class="fas fa-search me-2"></i>Interactive knowledge search</li>
                                <li><i class="fas fa-vector-square me-2"></i>Vector embedding management</li>
                                <li><i class="fas fa-sync me-2"></i>Knowledge base updates</li>
                            </ul>
                            <div class="mt-auto">
                                <span class="badge bg-warning text-dark">php bin/console securehealth -c medical-knowledge</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">
                                <i class="fas fa-lock me-2 text-danger"></i>Encryption Utilities
                            </h5>
                            <p class="card-text">MongoDB Queryable Encryption management and debugging.</p>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-key me-2"></i>Initialize encryption systems</li>
                                <li><i class="fas fa-bug me-2"></i>Debug encryption configuration</li>
                                <li><i class="fas fa-vial me-2"></i>Test encryption/decryption</li>
                                <li><i class="fas fa-info-circle me-2"></i>Check encryption status</li>
                                <li><i class="fas fa-cog me-2"></i>Encryption configuration</li>
                            </ul>
                            <div class="mt-auto">
                                <span class="badge bg-danger">php bin/console securehealth -c encryption</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">
                                <i class="fas fa-check-circle me-2 text-primary"></i>System Validation
                            </h5>
                            <p class="card-text">Comprehensive health checks and HIPAA compliance validation.</p>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-database me-2"></i>Database connection tests</li>
                                <li><img src="/images/securehealth-logo.png" alt="SecureHealth Logo" height="60" class="me-2">Authentication system checks</li>
                                <li><i class="fas fa-globe me-2"></i>API endpoint validation</li>
                                <li><i class="fas fa-lock me-2"></i>Encryption service tests</li>
                                <li><i class="fas fa-file-alt me-2"></i>File permission checks</li>
                            </ul>
                            <div class="mt-auto">
                                <span class="badge bg-primary">php bin/console securehealth -c validation</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h3>Interactive Mode</h3>
            <p>The command-line tool features an intuitive interactive mode that provides a menu-driven interface for easy navigation and operation:</p>

            <div class="code-block">
<span class="comment"># Start interactive mode</span><br>
<span class="keyword">php bin/console securehealth --interactive</span><br>
<br>
<span class="comment"># Example interactive session:</span><br>
🏥 SecureHealth - HIPAA-Compliant Medical Records System<br>
========================================================<br>
<br>
Interactive Mode<br>
----------------<br>
<br>
What would you like to do?<br>
  [0] setup<br>
  [1] users<br>
  [2] patients<br>
  [3] medical-knowledge<br>
  [4] encryption<br>
  [5] database<br>
  [6] validation<br>
  [7] status<br>
  [8] help<br>
 > 
            </div>

            <h3>Real-World Usage Examples</h3>
            <p>Here are practical examples of how to use the SecureHealth command-line tool in different scenarios:</p>

            <h4>Initial System Setup</h4>
            <div class="code-block">
<span class="comment"># Complete system setup for new installation</span><br>
<span class="keyword">php bin/console securehealth -c setup</span><br>
<br>
<span class="comment"># This will:</span><br>
<span class="comment"># 1. Create MongoDB schema</span><br>
<span class="comment"># 2. Create default users (Doctor, Nurse, Receptionist, Admin)</span><br>
<span class="comment"># 3. Generate sample patient data</span><br>
<span class="comment"># 4. Seed medical knowledge base</span><br>
<span class="comment"># 5. Run system validation</span>
            </div>

            <h4>Daily Administrative Tasks</h4>
            <div class="code-block">
<span class="comment"># Check system health and status</span><br>
<span class="keyword">php bin/console securehealth -c status</span><br>
<br>
<span class="comment"># Run comprehensive validation checks</span><br>
<span class="keyword">php bin/console securehealth -c validation</span><br>
<br>
<span class="comment"># Check encryption status and configuration</span><br>
<span class="keyword">php bin/console securehealth -c encryption</span><br>
<br>
<span class="comment"># Generate additional test patient data</span><br>
<span class="keyword">php bin/console securehealth -c patients</span>
            </div>

            <h4>User Management Operations</h4>
            <div class="code-block">
<span class="comment"># List all system users with roles and permissions</span><br>
<span class="keyword">php bin/console securehealth -c users</span><br>
<br>
<span class="comment"># Interactive user creation (follow prompts)</span><br>
<span class="comment"># Select "Create admin user" option</span><br>
<span class="comment"># Enter email, username, and password when prompted</span>
            </div>

            <h4>Data Management and Export</h4>
            <div class="code-block">
<span class="comment"># Check patient data statistics</span><br>
<span class="keyword">php bin/console securehealth -c patients</span><br>
<br>
<span class="comment"># Export patient data for backup or analysis</span><br>
<span class="comment"># Select "Export patient data" option</span><br>
<span class="comment"># Choose format (JSON, CSV, XML)</span><br>
<span class="comment"># Specify filename</span>
            </div>

            <h3>HIPAA Compliance Features</h3>
            <p>The command-line tool includes several features specifically designed for HIPAA compliance and healthcare data management:</p>

            <div class="row">
                <div class="col-md-6">
                    <h5><img src="/images/securehealth-logo.png" alt="SecureHealth Logo" height="60" class="me-2">Audit Logging</h5>
                    <ul>
                        <li>All administrative actions are logged</li>
                        <li>User access and permission changes tracked</li>
                        <li>Data export/import operations recorded</li>
                        <li>System configuration changes logged</li>
                        <li>Comprehensive audit trail for compliance</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h5><i class="fas fa-lock me-2 text-success"></i>Data Protection</h5>
                    <ul>
                        <li>Encryption status monitoring and validation</li>
                        <li>Secure data export with encryption awareness</li>
                        <li>Role-based access control validation</li>
                        <li>Data integrity checks and validation</li>
                        <li>Secure key management operations</li>
                    </ul>
                </div>
            </div>

            <h3>Error Handling and Troubleshooting</h3>
            <p>The command-line tool provides comprehensive error handling and troubleshooting capabilities:</p>

            <div class="alert alert-info">
                <i class="fas fa-info-circle me-2"></i>
                <strong>Robust Error Handling:</strong> All operations include detailed error messages, validation checks, and recovery suggestions to help administrators quickly identify and resolve issues.
            </div>

            <div class="code-block">
<span class="comment"># Example error handling output:</span><br>
❌ Database Connection: FAIL (Connection failed: Authentication failed)<br>
✅ User Authentication: PASS (Authentication system ready (4 users))<br>
⚠️ Encryption Service: WARNING (Encryption configured but currently disabled)<br>
✅ Medical Knowledge Base: PASS (Medical knowledge base ready (0 entries))<br>
✅ File Permissions: PASS (File permissions correct)<br>
<br>
[WARNING] 1 validation check(s) failed. Please review the issues above.
            </div>

            <h3>Integration with Existing Commands</h3>
            <p>The SecureHealth command-line tool integrates seamlessly with existing Symfony console commands while providing a unified interface:</p>

            <div class="code-block">
<span class="comment"># Traditional Symfony commands (still available)</span><br>
<span class="keyword">php bin/console app:create-users</span><br>
<span class="keyword">php bin/console app:generate-patient-data --count=50</span><br>
<span class="keyword">php bin/console app:seed-medical-knowledge --count=100</span><br>
<span class="keyword">php bin/console app:initialize-encryption</span><br>
<span class="keyword">php bin/console app:debug-encryption</span><br>
<br>
<span class="comment"># SecureHealth unified commands (recommended)</span><br>
<span class="keyword">php bin/console securehealth -c users</span><br>
<span class="keyword">php bin/console securehealth -c patients</span><br>
<span class="keyword">php bin/console securehealth -c medical-knowledge</span><br>
<span class="keyword">php bin/console securehealth -c encryption</span>
            </div>

            <h3>Production Deployment</h3>
            <p>For production environments, the command-line tool provides additional security and monitoring capabilities:</p>

            <div class="code-block">
<span class="comment"># Production environment setup</span><br>
<span class="keyword">php bin/console securehealth -c setup</span><br>
<br>
<span class="comment"># Regular health monitoring</span><br>
<span class="keyword">php bin/console securehealth -c validation</span><br>
<br>
<span class="comment"># Encryption status monitoring</span><br>
<span class="keyword">php bin/console securehealth -c encryption</span><br>
<br>
<span class="comment"># System status and statistics</span><br>
<span class="keyword">php bin/console securehealth -c status</span>
            </div>

            <div class="mt-4">
                <a href="https://github.com/mrlynn/securehealth/blob/main/src/Command/SecureHealthCommand.php" target="_blank" class="btn btn-primary me-3">
                    <i class="fab fa-github me-2"></i>View Command Source Code
                </a>
                <a href="https://github.com/mrlynn/securehealth/blob/main/docs/COMMAND_LINE_TOOL.md" target="_blank" class="btn btn-outline-primary me-3">
                    <i class="fas fa-book me-2"></i>Full Documentation
                </a>
                <a href="https://github.com/mrlynn/securehealth/blob/main/docs/COMMAND_REFERENCE.md" target="_blank" class="btn btn-outline-primary">
                    <i class="fas fa-list me-2"></i>Quick Reference
                </a>
            </div>
        </div>

        <!-- Development Guide -->
        <div class="section-card" id="development-guide">
            <h2><i class="fas fa-tools me-2"></i>Development Guide</h2>
            
            <p>This guide provides comprehensive instructions for setting up, developing, and maintaining the SecureHealth HIPAA-compliant medical records system with MongoDB 8.2 Queryable Encryption.</p>

            <div class="alert alert-info">
                <i class="fas fa-github me-2"></i>
                <strong>Open Source:</strong> This project is open source and available at 
                <a href="https://github.com/mrlynn/securehealth" target="_blank" class="alert-link">github.com/mrlynn/securehealth</a>
            </div>

            <h3>Environment Setup</h3>
            <p>Follow these steps to set up the SecureHealth development environment with MongoDB 8.2 Queryable Encryption:</p>

            <div class="code-block">
<span class="comment"># Clone the repository</span><br>
<span class="keyword">git clone</span> <span class="string">https://github.com/mrlynn/securehealth.git</span><br>
<span class="keyword">cd</span> <span class="string">securehealth</span><br>
<br>
<span class="comment"># Start the Docker environment (includes MongoDB 8.2)</span><br>
<span class="keyword">docker-compose up -d</span><br>
<br>
<span class="comment"># Install PHP dependencies</span><br>
<span class="keyword">docker-compose exec php composer install</span><br>
<br>
<span class="comment"># Generate encryption keys for MongoDB Queryable Encryption</span><br>
<span class="keyword">docker-compose exec php bin/console app:generate-encryption-key</span><br>
<br>
<span class="comment"># Initialize MongoDB with encryption configuration</span><br>
<span class="keyword">docker-compose exec php bin/console app:init-mongodb</span><br>
<br>
<span class="comment"># Access the application</span><br>
<span class="comment"># API: http://localhost:8081/api</span><br>
<span class="comment"># Frontend: http://localhost:8081</span><br>
<span class="comment"># Documentation: http://localhost:8081/documentation.html</span>
            </div>

            <h3>MongoDB 8.2 Queryable Encryption Setup</h3>
            <p>SecureHealth requires MongoDB 8.2 with Queryable Encryption support. The Docker setup includes:</p>

            <div class="row">
                <div class="col-md-6">
                    <h5><i class="fas fa-database me-2 text-primary"></i>MongoDB Configuration</h5>
                    <ul>
                        <li>MongoDB 8.2 Enterprise Edition</li>
                        <li>Queryable Encryption enabled</li>
                        <li>Client-side field level encryption</li>
                        <li>Key vault collection setup</li>
                        <li>Encrypted fields configuration</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h5><i class="fas fa-key me-2 text-success"></i>Encryption Setup</h5>
                    <ul>
                        <li>Master encryption key generation</li>
                        <li>Data encryption key management</li>
                        <li>Field-level encryption configuration</li>
                        <li>Search capability setup</li>
                        <li>Performance optimization</li>
                    </ul>
                </div>
            </div>

            <h3>Testing & Quality Assurance</h3>
            <p>SecureHealth includes comprehensive testing for HIPAA compliance and MongoDB Queryable Encryption:</p>

            <div class="code-block">
<span class="comment"># Run all tests including HIPAA compliance tests</span><br>
<span class="keyword">docker-compose exec php bin/phpunit</span><br>
<br>
<span class="comment"># Run specific test file</span><br>
<span class="keyword">docker-compose exec php bin/phpunit tests/Controller/Api/PatientControllerTest.php</span><br>
<br>
<span class="comment"># Run MongoDB Queryable Encryption tests</span><br>
<span class="keyword">docker-compose exec php bin/phpunit tests/Service/MongoDBEncryptionServiceTest.php</span><br>
<br>
<span class="comment"># Run HIPAA compliance tests</span><br>
<span class="keyword">docker-compose exec php bin/phpunit tests/Security/HIPAAComplianceTest.php</span><br>
<br>
<span class="comment"># Run tests with coverage</span><br>
<span class="keyword">docker-compose exec php bin/phpunit --coverage-html coverage/</span>
            </div>

            <h3>Debugging & Monitoring</h3>
            <p>Comprehensive debugging tools for development and production monitoring:</p>

            <div class="code-block">
<span class="comment"># View application logs</span><br>
<span class="keyword">docker-compose logs php</span><br>
<br>
<span class="comment"># View Nginx logs</span><br>
<span class="keyword">docker-compose logs nginx</span><br>
<br>
<span class="comment"># View MongoDB logs</span><br>
<span class="keyword">docker-compose logs mongodb</span><br>
<br>
<span class="comment"># Clear Symfony cache</span><br>
<span class="keyword">docker-compose exec php bin/console cache:clear</span><br>
<br>
<span class="comment"># Access MongoDB shell</span><br>
<span class="keyword">docker-compose exec mongodb mongosh</span><br>
<br>
<span class="comment"># View audit logs</span><br>
<span class="keyword">docker-compose exec php bin/console app:view-audit-logs</span>
            </div>

            <h3>HIPAA-Compliant Implementation Patterns</h3>
            <p>Key patterns used in SecureHealth for HIPAA compliance and MongoDB Queryable Encryption:</p>

            <h4>1. Service Layer Pattern with Encryption</h4>
            <p>Business logic is encapsulated in service classes with built-in encryption and audit logging:</p>
            <div class="code-block">
<span class="keyword">class</span> <span class="class">PatientService</span><br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public function</span> <span class="class">__construct</span>(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class">PatientRepository</span> <span class="string">$repository</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class">MongoDBEncryptionService</span> <span class="string">$encryption</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class">AuditLogService</span> <span class="string">$audit</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// HIPAA-compliant dependency injection</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public function</span> <span class="class">createPatient</span>(<span class="keyword">array</span> <span class="string">$data</span>): <span class="class">Patient</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Encrypt sensitive data before storage</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$encryptedData</span> = <span class="keyword">$this</span>-><span class="string">encryption</span>-><span class="class">encryptPatientData</span>(<span class="keyword">$data</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Create patient with encrypted data</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$patient</span> = <span class="keyword">$this</span>-><span class="string">repository</span>-><span class="class">create</span>(<span class="keyword">$encryptedData</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Log creation for HIPAA compliance</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$this</span>-><span class="string">audit</span>-><span class="class">logPatientCreation</span>(<span class="keyword">$patient</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span> <span class="keyword">$patient</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
}
            </div>

            <h4>2. Repository Pattern with Queryable Encryption</h4>
            <p>Data access is abstracted through repository classes that handle MongoDB 8.2 Queryable Encryption:</p>
            <div class="code-block">
<span class="keyword">class</span> <span class="class">PatientRepository</span><br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public function</span> <span class="class">findByEncryptedCriteria</span>(<span class="keyword">array</span> <span class="string">$criteria</span>): <span class="keyword">array</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Encrypt search criteria using MongoDB 8.2 Queryable Encryption</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$encryptedQuery</span> = <span class="keyword">$this</span>-><span class="class">encryptSearchCriteria</span>(<span class="keyword">$criteria</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Execute encrypted query on MongoDB 8.2</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$results</span> = <span class="keyword">$this</span>-><span class="class">executeQuery</span>(<span class="keyword">$encryptedQuery</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Decrypt results for application use</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span> <span class="keyword">$this</span>-><span class="class">decryptResults</span>(<span class="keyword">$results</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
}
            </div>

            <h4>3. Event-Driven Architecture for HIPAA Compliance</h4>
            <p>Audit logging and other cross-cutting concerns are handled through Symfony events for HIPAA compliance:</p>
            <div class="code-block">
<span class="keyword">class</span> <span class="class">PatientEventListener</span><br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public function</span> <span class="class">onPatientCreated</span>(<span class="class">PatientCreatedEvent</span> <span class="string">$event</span>): <span class="keyword">void</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Log patient creation for HIPAA audit trail</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$this</span>-><span class="string">auditLogService</span>-><span class="class">logPatientCreation</span>(<span class="keyword">$event</span>-><span class="class">getPatient</span>());<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Log encryption status</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">$this</span>-><span class="string">auditLogService</span>-><span class="class">logEncryptionEvent</span>(<span class="string">'PATIENT_CREATED_ENCRYPTED'</span>);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
}
            </div>

            <h3>Security Best Practices</h3>
            <div class="row">
                <div class="col-md-6">
                    <h5><img src="/images/securehealth-logo.png" alt="SecureHealth Logo" height="60" class="me-2">HIPAA Compliance</h5>
                    <ul>
                        <li>Field-level encryption for all PHI</li>
                        <li>Comprehensive audit logging</li>
                        <li>Role-based access control</li>
                        <li>Data integrity protection</li>
                        <li>Transmission security</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h5><i class="fas fa-lock me-2 text-success"></i>MongoDB 8.2 Security</h5>
                    <ul>
                        <li>Queryable Encryption implementation</li>
                        <li>Client-side field level encryption</li>
                        <li>Key management best practices</li>
                        <li>Encrypted search capabilities</li>
                        <li>Performance optimization</li>
                    </ul>
                </div>
            </div>

            <h3>Deployment & Production</h3>
            <p>For production deployment, ensure the following security measures are in place:</p>

            <div class="code-block">
<span class="comment"># Production environment variables</span><br>
<span class="keyword">MONGODB_URI</span>=<span class="string">mongodb+srv://user:pass@cluster.mongodb.net/securehealth</span><br>
<span class="keyword">MONGODB_DB</span>=<span class="string">securehealth</span><br>
<span class="keyword">APP_SECRET</span>=<span class="string">your-secure-app-secret</span><br>
<span class="keyword">JWT_SECRET_KEY</span>=<span class="string">your-jwt-secret-key</span><br>
<span class="keyword">ENCRYPTION_KEY_PATH</span>=<span class="string">/secure/path/to/encryption.key</span><br>
<br>
<span class="comment"># Security headers and HTTPS</span><br>
<span class="keyword">HTTPS_ONLY</span>=<span class="string">true</span><br>
<span class="keyword">SECURE_HEADERS</span>=<span class="string">true</span><br>
<span class="keyword">AUDIT_LOG_RETENTION</span>=<span class="string">7years</span>
            </div>

            <div class="mt-4">
                <a href="https://github.com/mrlynn/securehealth" target="_blank" class="btn btn-primary me-3">
                    <i class="fab fa-github me-2"></i>View on GitHub
                </a>
                <a href="/queryable-encryption-search.html" class="btn btn-outline-primary me-3">
                    <i class="fas fa-search me-2"></i>Try Demo
                </a>
                <a href="https://github.com/mrlynn/securehealth/blob/main/docs/README.md" target="_blank" class="btn btn-outline-primary">
                    <i class="fas fa-book me-2"></i>Full Documentation
                </a>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <h5 class="fw-bold mb-3">
                        <img src="/images/securehealth-logo.png" alt="SecureHealth Logo" height="60" class="me-2">SecureHealth
                    </h5>
                    <p class="text-light">
                        HIPAA-compliant medical records management powered by 
                        MongoDB Queryable Encryption technology.
                    </p>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6 class="fw-bold mb-3">Documentation</h6>
                    <ul class="list-unstyled">
                        <li><a href="#overview" class="text-light text-decoration-none">Overview</a></li>
                        <li><a href="#symfony-encryption" class="text-light text-decoration-none">Encryption</a></li>
                        <li><a href="#security-voters" class="text-light text-decoration-none">Security</a></li>
                        <li><a href="#api-reference" class="text-light text-decoration-none">API Reference</a></li>
                        <li><a href="#command-line-tool" class="text-light text-decoration-none">CLI Tool</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6 class="fw-bold mb-3">Resources</h6>
                    <ul class="list-unstyled">
                        <li><a href="/index.html" class="text-light text-decoration-none">Home</a></li>
                        <li><a href="/login.html" class="text-light text-decoration-none">Demo</a></li>
                        <li><a href="#" class="text-light text-decoration-none">Support</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 mb-4">
                    <h6 class="fw-bold mb-3">Technology Stack</h6>
                    <div class="d-flex flex-wrap gap-2">
                        <span class="badge bg-light text-dark">MongoDB</span>
                        <span class="badge bg-light text-dark">Queryable Encryption</span>
                        <span class="badge bg-light text-dark">PHP</span>
                        <span class="badge bg-light text-dark">Symfony</span>
                        <span class="badge bg-light text-dark">Security Voters</span>
                        <span class="badge bg-light text-dark">Bootstrap</span>
                    </div>
                </div>
            </div>
            <hr class="my-4">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0 text-light">
                        &copy; 2024 SecureHealth. Built for educational and demonstration purposes.
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <small class="text-light">
                        <i class="fas fa-lock me-1"></i>
                        HIPAA Compliant • Encrypted at Rest • Role-Based Access
                    </small>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    <!-- Smooth scrolling -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Wait for navbar to initialize, then set up smooth scrolling
            setTimeout(() => {
                // Smooth scrolling
                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        const target = document.querySelector(this.getAttribute('href'));
                        if (target) {
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    });
                });
            }, 100);
        });
    </script>
</body>
</html>